# 面向对象程序设计3
[TOC]
---
## 构造函数与拷贝控制
### 虚析构函数
作为基类使用的类需要虚析构函数，来保证`delete`一个指向派生类对象的基类指针时能够正确进行。

如果该类没有指针数据成员，那么使用合成版本的析构函数即可。如果含有指针数据成员，那么需要在析构函数中明确对该对象的清除方法。

### 合成拷贝控制与继承
#### 派生类中删除的拷贝控制与基类的关系
* 如果基类中的默认构造函数、拷贝构造函数、拷贝赋值运算符或析构函数是被删除的函数或者不可访问，则派生类中对应的成员将是被删除的。

### 派生类的拷贝控制成员
当为派生类定义拷贝或移动构造函数时，我们通常使用对应的基类构造函数初始化对象的基类部分。

## 容器与继承

当派生类对象被赋值给基类对象时，其中的派生类部分将会被“切掉”，因此容器和存在继承关系的类型无法兼容。

#### 在容器中放置（智能）指针而非对象

当我们希望在容器中存放具有继承关系的对象时，我们实际上存放的通常是积累的指针（更好的选择是智能指针）
```c++
vector<shared_ptr<Quote>> basket;

basket.push_back(make_shared<Quote>("0-201-823-323",50));
basket.push_back(
    make_shared<Bulk_quote>("0-2323-234234-23", 50, 10, .25);
)
cout << basket.back()->net_price(15) <<endl;
```

### 编写Basket类
无法使用对象来进行面向对象编程，反而得使用指针和引用。而这会增加复杂性，所以我们通常编写一个辅助类来处理这种情况。
